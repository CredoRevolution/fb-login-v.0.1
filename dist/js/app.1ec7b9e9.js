(function(){"use strict";var t={7787:function(t,s,e){var n=e(6848),c=function(){var t=this,s=t._self._c;return s("div",{staticClass:"app",attrs:{id:"app"}},[t.authorised?s("div",{staticClass:"authorized"},[s("button",{staticClass:"get-posts-button",on:{click:function(s){return s.preventDefault(),t.getPosts.apply(null,arguments)}}},[t._v(" getPosts ")]),s("div",{staticClass:"bussiness-acc"},[s("p",[t._v(t._s(t.bussinessAccount.name))]),s("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.bussinessAccount.picture,width:"50",height:"50"}}),s("p",[t._v(t._s(t.bussinessAccount.connected_instagram_account))]),this.bussinessAccount.feed&&this.bussinessAccount.feed.length?s("p",[t._v(" "+t._s(t.bussinessAccount.feed)+" ")]):s("p",[t._v("No posts")])]),s("div",{staticClass:"inst-acc"},[s("p",[t._v(t._s(t.instAcc.accUsername))]),s("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.instAcc.accProfilePic,width:"200",height:"200"}})]),t.posts.length?s("div",{staticClass:"posts"},t._l(t.posts,(function(e){return s("div",{key:e.id,staticClass:"post"},[s("img",{attrs:{src:e.media_url,width:"200",height:"200"}}),s("p",[t._v(t._s(e.caption))])])})),0):t._e()]):s("button",{staticClass:"login-button",on:{click:function(s){return s.preventDefault(),t.login.apply(null,arguments)}}},[t._v(" login ")])])},o=[];let i=!1;const a=e(6425);var r={name:"App",data(){return{authorised:!1,posts:[],accessToken:"",instAcc:{accId:"",accUsername:"",accProfilePic:""},bussinessAccount:{accId:"",feed:[],name:"",connected_instagram_account:"",picture:""},accessTokenBussiness:"",bussinessAccountId:""}},methods:{login(){i?FB.login((t=>{console.log("FB.login",t),this.statusChangeCallback(t)}),{scope:"public_profile,instagram_basic,pages_show_list,instagram_content_publish"}):console.warn("FB.init() must be called before FB.login()")},statusChangeCallback(t){"connected"===t.status?(console.log("connected"),this.authorised=!0,this.accessToken=t.authResponse.accessToken):"not_authorized"===t.status&&(console.log("not_authorized"),this.authorised=!1)},getPosts(){this.authorised?a.get(`https://graph.facebook.com/v19.0/me/accounts?access_token=${this.accessToken}`,{headers:{"Content-Type":"application/json"}}).catch((t=>{400===t.response.status?console.error("Bad request: please check the access_token"):console.error(t)})).then((t=>{console.log(t),this.bussinessAccountId=t.data.data[0].id,this.accessTokenBussiness=t.data.data[0].access_token})).catch((t=>{console.error(t)})).then((()=>{a.get(`https://graph.facebook.com/v19.0/${this.bussinessAccountId}?fields=name,picture,feed,connected_instagram_account&access_token=${this.accessTokenBussiness}`,{headers:{"Content-Type":"application/json"}}).then((t=>{console.log(t),t.data.feed&&(this.bussinessAccount.accId=t.data.id,this.bussinessAccount.feed=t.data.feed.data),this.bussinessAccount.name=t.data.name||"",this.bussinessAccount.picture=t.data.picture&&t.data.picture.data.url||"",this.bussinessAccount.connected_instagram_account=t.data.connected_instagram_account&&t.data.connected_instagram_account.id||"",console.log(this.bussinessAccount)})).catch((t=>{console.error(t)})).then((()=>{FB.api(`/${this.bussinessAccount.connected_instagram_account}/?fields=username,profile_picture_url,media{media_url}`,"GET",{},(t=>{console.log(t),t&&(this.instAcc.accId=t.id,this.instAcc.accUsername=t.username,this.instAcc.accProfilePic=t.profile_picture_url,this.posts=t.media.data)}))})).then((()=>{console.log(this.instAcc)})).catch((t=>{console.error(t)}))})):console.warn("login() must be called before getPosts()")}},mounted(){window.fbAsyncInit=function(){FB.init({appId:"1530852871068475",cookie:!0,xfbml:!0,version:"v19.0"}),i=!0,FB.AppEvents.logPageView()},function(t,s,e){var n,c=t.getElementsByTagName(s)[0];t.getElementById(e)||(n=t.createElement(s),n.id=e,n.src="https://connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}},u=r,l=e(1656),d=(0,l.A)(u,c,o,!1,null,"d81ab438",null),p=d.exports;n.Ay.config.productionTip=!1,new n.Ay({render:t=>t(p)}).$mount("#app")}},s={};function e(n){var c=s[n];if(void 0!==c)return c.exports;var o=s[n]={exports:{}};return t[n].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(s,n,c,o){if(!n){var i=1/0;for(l=0;l<t.length;l++){n=t[l][0],c=t[l][1],o=t[l][2];for(var a=!0,r=0;r<n.length;r++)(!1&o||i>=o)&&Object.keys(e.O).every((function(t){return e.O[t](n[r])}))?n.splice(r--,1):(a=!1,o<i&&(i=o));if(a){t.splice(l--,1);var u=c();void 0!==u&&(s=u)}}return s}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[n,c,o]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={524:0};e.O.j=function(s){return 0===t[s]};var s=function(s,n){var c,o,i=n[0],a=n[1],r=n[2],u=0;if(i.some((function(s){return 0!==t[s]}))){for(c in a)e.o(a,c)&&(e.m[c]=a[c]);if(r)var l=r(e)}for(s&&s(n);u<i.length;u++)o=i[u],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(l)},n=self["webpackChunkinstagram_api"]=self["webpackChunkinstagram_api"]||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))}();var n=e.O(void 0,[504],(function(){return e(7787)}));n=e.O(n)})();
//# sourceMappingURL=app.1ec7b9e9.js.map